<div class="sidebar-header">
  <h3>Mensajes</h3>
  <span 
    class="unread-badge"
    *ngIf="totalUnreadCount > 0"
    #badgeRef>
    {{ totalUnreadCount }}
  </span>
  <button class="btn-toggle" (click)="toggle()" [attr.aria-label]="'Toggle Contactos'">
    <lucide-icon *ngIf="collapsed" [img]="ChevronUpIcon" size="20"></lucide-icon>
    <lucide-icon *ngIf="!collapsed" [img]="ChevronDownIcon" size="20"></lucide-icon>
  </button>
</div>

<div class="sidebar-body">
  <div *ngIf="loading" class="status">Cargandoâ€¦</div>
  <div *ngIf="error"   class="status error">{{ error }}</div>

  <ul *ngIf="!loading && !error">
    <li *ngFor="let c of contacts"
        (click)="select(c)"
        class="contact-item">
      <img [src]="c.fotoUrl" class="avatar" />
      <span class="name">{{ c.nombre }}</span>
      <span class="badge" *ngIf="c.unread > 0">
      {{ c.unread }}
    </span>
    </li>
  </ul>

  <div *ngIf="!loading && !contacts.length" class="status">
    No hay conversaciones pendientes
  </div>
</div>
